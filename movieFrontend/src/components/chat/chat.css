/* Custom scrollbar for chat messages */
.chat-messages::-webkit-scrollbar {
  width: 6px;
}

.chat-messages::-webkit-scrollbar-track {
  background: transparent;
}

.chat-messages::-webkit-scrollbar-thumb {
  background: #4b5563;
  border-radius: 3px;
}

.chat-messages::-webkit-scrollbar-thumb:hover {
  background: #6b7280;
}

/* Ensure proper height management for flexbox scrolling */
.chat-messages {
  min-height: 0;
  flex: 1 1 auto;
  overflow-y: auto;
  overflow-x: hidden;
}

/* Force message stacking - critical for preventing inline display */
.chat-messages > div {
  display: block !important;
  width: 100% !important;
  margin-bottom: 12px !important;
}

/* Ensure message containers are properly stacked */
.chat-messages .space-y-3 {
  display: flex !important;
  flex-direction: column !important;
  width: 100% !important;
}

/* Sender messages (right side) - Blue background */
.chat-messages .sender-message {
  display: flex !important;
  justify-content: flex-end !important;
  align-items: flex-end !important;
  width: 100% !important;
}

/* Receiver messages (left side) - Dark background */
.chat-messages .receiver-message {
  display: flex !important;
  justify-content: flex-start !important;
  align-items: flex-start !important;
  width: 100% !important;
}

/* Alternative selectors for backward compatibility */
.chat-messages .flex.justify-end {
  display: flex !important;
  justify-content: flex-end !important;
  align-items: flex-end !important;
  width: 100% !important;
}

.chat-messages .flex.justify-start {
  display: flex !important;
  justify-content: flex-start !important;
  align-items: flex-start !important;
  width: 100% !important;
}

/* Ensure message bubbles don't collapse */
.chat-messages .message-bubble {
  display: block !important;
  width: fit-content !important;
  max-width: 100% !important;
  word-wrap: break-word !important;
}

/* Force sender message bubbles to align right */
.chat-messages .sender-message .message-bubble {
  margin-left: auto !important;
  margin-right: 0 !important;
}

/* Force receiver message bubbles to align left */
.chat-messages .receiver-message .message-bubble {
  margin-left: 0 !important;
  margin-right: auto !important;
}

/* Message bubble animations */
.message-bubble {
  animation: messageSlideIn 0.3s ease-out;
}

@keyframes messageSlideIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Typing indicator animation */
.typing-dot {
  animation: typingBounce 1.4s infinite ease-in-out;
}

.typing-dot:nth-child(1) { animation-delay: -0.32s; }
.typing-dot:nth-child(2) { animation-delay: -0.16s; }

@keyframes typingBounce {
  0%, 80%, 100% {
    transform: scale(0);
  }
  40% {
    transform: scale(1);
  }
}
